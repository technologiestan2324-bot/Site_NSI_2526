<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur de Graphes - NSI</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #f0f4f8;
            --accent-1: #0066cc;
            --accent-2: #cc0066;
            --accent-3: #00aa66;
            --accent-4: #ff9900;
            --text: #1a1a1a;
            --text-dim: #666666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #e8f0f8 0%, #f5f8fc 50%, #e8f0f8 100%);
            color: var(--text);
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        h1 {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 1.5rem;
        }

        .controls-panel {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .control-section {
            margin-bottom: 1.5rem;
        }

        .control-section h3 {
            color: var(--accent-1);
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        label {
            display: block;
            color: var(--text-dim);
            font-size: 0.85rem;
            margin-bottom: 0.4rem;
            font-weight: 600;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: 0.6rem;
            background: rgba(240, 244, 248, 0.6);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .radio-option:hover {
            background: rgba(0, 102, 204, 0.1);
            border-color: var(--accent-1);
        }

        .radio-option input {
            margin-right: 0.6rem;
            cursor: pointer;
            accent-color: var(--accent-1);
        }

        .radio-option.checked {
            background: rgba(0, 102, 204, 0.15);
            border-color: var(--accent-1);
        }

        input[type="number"], input[type="text"], input[type="color"] {
            width: 100%;
            padding: 0.7rem;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(0, 102, 204, 0.2);
            border-radius: 8px;
            color: var(--text);
            font-size: 0.95rem;
            font-family: 'Fira Code', monospace;
        }

        input[type="color"] {
            height: 45px;
            cursor: pointer;
        }

        .button {
            width: 100%;
            padding: 0.8rem;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            margin-top: 0.5rem;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 102, 204, 0.4);
        }

        .button-secondary {
            background: linear-gradient(135deg, var(--accent-3), var(--accent-4));
        }

        .canvas-container {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            min-height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #graphCanvas {
            background: #ffffff;
            border-radius: 12px;
            border: 2px solid rgba(0, 102, 204, 0.15);
            cursor: pointer;
        }

        .instructions {
            background: rgba(0, 170, 102, 0.1);
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid var(--accent-3);
            font-size: 0.85rem;
            margin-top: 1rem;
        }

        .instructions strong {
            color: var(--accent-3);
            display: block;
            margin-bottom: 0.5rem;
        }

        /* Modal pour direction et poids */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
        }

        .modal-header {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent-1);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .modal-option {
            padding: 1rem;
            margin: 0.5rem 0;
            background: rgba(240, 244, 248, 0.6);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
        }

        .modal-option:hover {
            background: rgba(0, 102, 204, 0.1);
            border-color: var(--accent-1);
            transform: translateY(-2px);
        }

        .modal-input {
            margin: 1rem 0;
        }

        .modal-input label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-dim);
        }

        .modal-input input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid rgba(0, 102, 204, 0.2);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Fira Code', monospace;
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .modal-buttons button {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-confirm {
            background: var(--accent-3);
            color: white;
        }

        .btn-confirm:hover {
            background: #008855;
            transform: translateY(-2px);
        }

        .btn-cancel {
            background: #ddd;
            color: var(--text);
        }

        .btn-cancel:hover {
            background: #ccc;
        }

        .edge-list {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-top: 1.5rem;
        }

        .edge-list h3 {
            color: var(--accent-2);
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .edge-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            background: rgba(240, 244, 248, 0.6);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .edge-item:hover {
            background: rgba(0, 102, 204, 0.1);
        }

        .delete-btn {
            background: var(--accent-2);
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: #aa0055;
            transform: scale(1.05);
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            .controls-panel {
                position: static;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üï∏ G√©n√©rateur de Graphes Interactif</h1>
            <p class="subtitle">Cliquez sur le canvas pour cr√©er des sommets, puis reliez-les</p>
        </header>

        <div class="main-grid">
            <!-- PANNEAU DE CONTR√îLES -->
            <div class="controls-panel">
                <div class="control-section">
                    <h3>‚öô Configuration</h3>
                    
                    <div style="margin-bottom: 1rem;">
                        <label>Nombre de sommets</label>
                        <input type="number" id="numNodes" value="5" min="2" max="20">
                    </div>

                    <button class="button" onclick="createNodes()">‚ú® Cr√©er les sommets</button>
                </div>

                <div class="control-section">
                    <h3>üìê Type de graphe</h3>
                    
                    <div style="margin-bottom: 1rem;">
                        <label>Orientation</label>
                        <div class="radio-group">
                            <div class="radio-option checked" onclick="selectRadio(this, 'orientation')">
                                <input type="radio" name="orientation" value="non-oriente" checked>
                                <span>Non orient√©</span>
                            </div>
                            <div class="radio-option" onclick="selectRadio(this, 'orientation')">
                                <input type="radio" name="orientation" value="oriente">
                                <span>Orient√© (avec fl√®ches)</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label>Pond√©ration</label>
                        <div class="radio-group">
                            <div class="radio-option checked" onclick="selectRadio(this, 'ponderation')">
                                <input type="radio" name="ponderation" value="non-pondere" checked>
                                <span>Non pond√©r√©</span>
                            </div>
                            <div class="radio-option" onclick="selectRadio(this, 'ponderation')">
                                <input type="radio" name="ponderation" value="pondere">
                                <span>Pond√©r√© (avec poids)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>üé® Couleurs</h3>
                    
                    <div style="margin-bottom: 1rem;">
                        <label>Couleur sommets</label>
                        <input type="color" id="nodeColor" value="#0066cc" onchange="redraw()">
                    </div>

                    <div>
                        <label>Couleur ar√™tes</label>
                        <input type="color" id="edgeColor" value="#00aa66" onchange="redraw()">
                    </div>
                </div>

                <div class="control-section">
                    <button class="button" onclick="clearAll()">üóë Tout effacer</button>
                    <button class="button button-secondary" onclick="exportGraph()">üíæ T√©l√©charger PNG</button>
                </div>

                <div class="instructions">
                    <strong>üìã Instructions :</strong>
                    <p>1. Cr√©ez les sommets avec le bouton ci-dessus</p>
                    <p>2. Cliquez sur deux sommets pour cr√©er une ar√™te</p>
                    <p>3. Un menu appara√Ætra pour la direction et/ou le poids</p>
                </div>
            </div>

            <!-- CANVAS ET LISTE -->
            <div>
                <div class="canvas-container">
                    <canvas id="graphCanvas" width="900" height="600"></canvas>
                </div>

                <!-- LISTE DES AR√äTES -->
                <div class="edge-list" id="edgeListPanel" style="display: none;">
                    <h3>üîó Ar√™tes du graphe</h3>
                    <div id="edgesList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL POUR ORIENTATION -->
    <div class="modal" id="directionModal">
        <div class="modal-content">
            <div class="modal-header">Choisir la direction de l'ar√™te</div>
            <div id="directionOptions"></div>
        </div>
    </div>

    <!-- MODAL POUR POIDS -->
    <div class="modal" id="weightModal">
        <div class="modal-content">
            <div class="modal-header">D√©finir le poids de l'ar√™te</div>
            <div class="modal-input">
                <label>Poids :</label>
                <input type="number" id="weightInput" value="1" min="1" max="100">
            </div>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeWeightModal()">Annuler</button>
                <button class="btn-confirm" onclick="confirmWeight()">Valider</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');
        
        let nodes = [];
        let edges = [];
        let selectedNode = null;
        let tempEdge = null;
        
        let config = {
            oriented: false,
            weighted: false,
            nodeColor: '#0066cc',
            edgeColor: '#00aa66'
        };

        // Gestion des radios
        function selectRadio(element, group) {
            const parent = element.parentElement;
            parent.querySelectorAll('.radio-option').forEach(opt => {
                opt.classList.remove('checked');
            });
            element.classList.add('checked');
            element.querySelector('input').checked = true;
            
            if (group === 'orientation') {
                config.oriented = element.querySelector('input').value === 'oriente';
            } else if (group === 'ponderation') {
                config.weighted = element.querySelector('input').value === 'pondere';
            }
            redraw();
        }

        // Cr√©er les sommets
        function createNodes() {
            const numNodes = parseInt(document.getElementById('numNodes').value);
            
            if (numNodes < 2 || numNodes > 20) {
                alert('Le nombre de sommets doit √™tre entre 2 et 20');
                return;
            }

            nodes = [];
            edges = [];
            selectedNode = null;

            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 80;

            for (let i = 0; i < numNodes; i++) {
                const angle = (i * 2 * Math.PI) / numNodes - Math.PI / 2;
                nodes.push({
                    label: String.fromCharCode(65 + i),
                    x: centerX + radius * Math.cos(angle),
                    y: centerY + radius * Math.sin(angle)
                });
            }

            redraw();
            updateEdgesList();
        }

        // Clic sur le canvas
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // V√©rifier si on a cliqu√© sur un sommet
            const clickedNode = nodes.find(node => {
                const dist = Math.sqrt((x - node.x) ** 2 + (y - node.y) ** 2);
                return dist <= 28;
            });

            if (clickedNode) {
                if (selectedNode === null) {
                    // Premier sommet s√©lectionn√©
                    selectedNode = clickedNode;
                    redraw();
                } else if (selectedNode === clickedNode) {
                    // D√©s√©lection
                    selectedNode = null;
                    redraw();
                } else {
                    // Cr√©er une ar√™te
                    tempEdge = {
                        from: selectedNode,
                        to: clickedNode
                    };

                    // V√©rifier si l'ar√™te existe d√©j√†
                    const existingEdge = edges.find(e => 
                        (e.from === selectedNode && e.to === clickedNode) ||
                        (e.from === clickedNode && e.to === selectedNode)
                    );

                    if (existingEdge) {
                        alert('Cette ar√™te existe d√©j√† !');
                        selectedNode = null;
                        redraw();
                        return;
                    }

                    if (config.oriented) {
                        showDirectionModal();
                    } else if (config.weighted) {
                        showWeightModal('both');
                    } else {
                        addEdge('both', 1);
                    }
                }
            }
        });

        // Afficher le modal de direction
        function showDirectionModal() {
            const modal = document.getElementById('directionModal');
            const options = document.getElementById('directionOptions');
            
            options.innerHTML = `
                <div class="modal-option" onclick="selectDirection('forward')">
                    ${tempEdge.from.label} ‚Üí ${tempEdge.to.label}
                    <br><small>Arc de ${tempEdge.from.label} vers ${tempEdge.to.label}</small>
                </div>
                <div class="modal-option" onclick="selectDirection('backward')">
                    ${tempEdge.to.label} ‚Üí ${tempEdge.from.label}
                    <br><small>Arc de ${tempEdge.to.label} vers ${tempEdge.from.label}</small>
                </div>
                <div class="modal-option" onclick="selectDirection('both')">
                    ${tempEdge.from.label} ‚Üî ${tempEdge.to.label}
                    <br><small>Double sens (deux arcs)</small>
                </div>
                <div class="modal-option" onclick="closeDirectionModal()" style="background: #f0f0f0; margin-top: 1rem;">
                    Annuler
                </div>
            `;
            
            modal.style.display = 'flex';
        }

        function selectDirection(direction) {
            closeDirectionModal();
            
            if (config.weighted) {
                showWeightModal(direction);
            } else {
                addEdge(direction, 1);
            }
        }

        function closeDirectionModal() {
            document.getElementById('directionModal').style.display = 'none';
            selectedNode = null;
            redraw();
        }

        // Afficher le modal de poids
        function showWeightModal(direction) {
            tempEdge.direction = direction;
            document.getElementById('weightInput').value = 1;
            document.getElementById('weightModal').style.display = 'flex';
            document.getElementById('weightInput').focus();
        }

        function confirmWeight() {
            const weight = parseInt(document.getElementById('weightInput').value);
            if (weight > 0) {
                addEdge(tempEdge.direction, weight);
                closeWeightModal();
            }
        }

        function closeWeightModal() {
            document.getElementById('weightModal').style.display = 'none';
            selectedNode = null;
            redraw();
        }

        // Ajouter une ar√™te
        function addEdge(direction, weight) {
            if (direction === 'forward') {
                edges.push({
                    from: tempEdge.from,
                    to: tempEdge.to,
                    weight: weight,
                    bidirectional: false
                });
            } else if (direction === 'backward') {
                edges.push({
                    from: tempEdge.to,
                    to: tempEdge.from,
                    weight: weight,
                    bidirectional: false
                });
            } else if (direction === 'both') {
                if (config.oriented) {
                    // Deux arcs s√©par√©s
                    edges.push({
                        from: tempEdge.from,
                        to: tempEdge.to,
                        weight: weight,
                        bidirectional: false
                    });
                    edges.push({
                        from: tempEdge.to,
                        to: tempEdge.from,
                        weight: weight,
                        bidirectional: false
                    });
                } else {
                    // Ar√™te non orient√©e
                    edges.push({
                        from: tempEdge.from,
                        to: tempEdge.to,
                        weight: weight,
                        bidirectional: true
                    });
                }
            }

            selectedNode = null;
            redraw();
            updateEdgesList();
        }

        // Dessiner le graphe
        function redraw() {
            config.nodeColor = document.getElementById('nodeColor').value;
            config.edgeColor = document.getElementById('edgeColor').value;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Dessiner les ar√™tes
            edges.forEach(edge => {
                const fromX = edge.from.x;
                const fromY = edge.from.y;
                const toX = edge.to.x;
                const toY = edge.to.y;

                // V√©rifier si c'est un double arc
                const reverseEdge = edges.find(e => 
                    e.from === edge.to && e.to === edge.from && config.oriented
                );

                if (config.oriented && !edge.bidirectional) {
                    // Dessiner une fl√®che
                    if (reverseEdge) {
                        // Double arc - d√©caler l√©g√®rement
                        drawCurvedArrow(fromX, fromY, toX, toY, 15);
                    } else {
                        drawArrow(fromX, fromY, toX, toY);
                    }
                } else {
                    // Ligne simple
                    ctx.strokeStyle = config.edgeColor;
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.moveTo(fromX, fromY);
                    ctx.lineTo(toX, toY);
                    ctx.stroke();
                }

                // Dessiner le poids
                if (config.weighted) {
                    const midX = (fromX + toX) / 2;
                    const midY = (fromY + toY) / 2;
                    
                    // Fond blanc
                    ctx.fillStyle = '#ffffff';
                    ctx.beginPath();
                    ctx.arc(midX, midY, 18, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Bordure
                    ctx.strokeStyle = config.edgeColor;
                    ctx.lineWidth = 2;
                    ctx.stroke();

                    // Texte du poids
                    ctx.fillStyle = '#ff9900';
                    ctx.font = 'bold 15px Fira Code';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(edge.weight, midX, midY);
                }
            });

            // Dessiner les sommets
            nodes.forEach(node => {
                const isSelected = node === selectedNode;
                
                ctx.fillStyle = isSelected ? '#ff0080' : config.nodeColor;
                ctx.strokeStyle = isSelected ? '#ffffff' : 'rgba(0, 0, 0, 0.2)';
                ctx.lineWidth = isSelected ? 4 : 3;
                
                ctx.beginPath();
                ctx.arc(node.x, node.y, 28, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();

                if (isSelected) {
                    ctx.shadowColor = 'rgba(255, 0, 128, 0.5)';
                    ctx.shadowBlur = 15;
                    ctx.fill();
                    ctx.shadowBlur = 0;
                }

                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 20px Nunito';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(node.label, node.x, node.y);
            });
        }

        // Dessiner une fl√®che simple
        function drawArrow(fromX, fromY, toX, toY) {
            const headLength = 15;
            const angle = Math.atan2(toY - fromY, toX - fromX);
            const adjustedToX = toX - 28 * Math.cos(angle);
            const adjustedToY = toY - 28 * Math.sin(angle);

            ctx.strokeStyle = config.edgeColor;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(adjustedToX, adjustedToY);
            ctx.stroke();

            ctx.fillStyle = config.edgeColor;
            ctx.beginPath();
            ctx.moveTo(adjustedToX, adjustedToY);
            ctx.lineTo(
                adjustedToX - headLength * Math.cos(angle - Math.PI / 6),
                adjustedToY - headLength * Math.sin(angle - Math.PI / 6)
            );
            ctx.lineTo(
                adjustedToX - headLength * Math.cos(angle + Math.PI / 6),
                adjustedToY - headLength * Math.sin(angle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fill();
        }

        // Dessiner une fl√®che courb√©e (pour double arcs)
        function drawCurvedArrow(fromX, fromY, toX, toY, offset) {
            const angle = Math.atan2(toY - fromY, toX - fromX);
            const midX = (fromX + toX) / 2;
            const midY = (fromY + toY) / 2;
            
            // Point de contr√¥le d√©cal√© perpendiculairement
            const controlX = midX + offset * Math.cos(angle + Math.PI / 2);
            const controlY = midY + offset * Math.sin(angle + Math.PI / 2);

            ctx.strokeStyle = config.edgeColor;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.quadraticCurveTo(controlX, controlY, toX, toY);
            ctx.stroke();

            // Fl√®che √† la fin
            const t = 0.95;
            const curveX = (1-t)*(1-t)*fromX + 2*(1-t)*t*controlX + t*t*toX;
            const curveY = (1-t)*(1-t)*fromY + 2*(1-t)*t*controlY + t*t*toY;
            const curveAngle = Math.atan2(toY - curveY, toX - curveX);

            const headLength = 15;
            ctx.fillStyle = config.edgeColor;
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(
                toX - headLength * Math.cos(curveAngle - Math.PI / 6),
                toY - headLength * Math.sin(curveAngle - Math.PI / 6)
            );
            ctx.lineTo(
                toX - headLength * Math.cos(curveAngle + Math.PI / 6),
                toY - headLength * Math.sin(curveAngle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fill();
        }

        // Mettre √† jour la liste des ar√™tes
        function updateEdgesList() {
            const panel = document.getElementById('edgeListPanel');
            const list = document.getElementById('edgesList');

            if (edges.length === 0) {
                panel.style.display = 'none';
                return;
            }

            panel.style.display = 'block';
            list.innerHTML = '';

            edges.forEach((edge, index) => {
                const div = document.createElement('div');
                div.className = 'edge-item';
                
                const arrow = config.oriented ? '‚Üí' : '‚Äî';
                const weight = config.weighted ? ` (${edge.weight})` : '';
                
                div.innerHTML = `
                    <span>${edge.from.label} ${arrow} ${edge.to.label}${weight}</span>
                    <button class="delete-btn" onclick="deleteEdge(${index})">Supprimer</button>
                `;
                list.appendChild(div);
            });
        }

        // Supprimer une ar√™te
        function deleteEdge(index) {
            edges.splice(index, 1);
            redraw();
            updateEdgesList();
        }

        // Tout effacer
        function clearAll() {
            if (confirm('Voulez-vous vraiment tout effacer ?')) {
                nodes = [];
                edges = [];
                selectedNode = null;
                redraw();
                updateEdgesList();
            }
        }

        // Exporter
        function exportGraph() {
            if (nodes.length === 0) {
                alert('Cr√©ez d\'abord un graphe !');
                return;
            }
            const link = document.createElement('a');
            link.download = 'graphe.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Initialisation
        ctx.fillStyle = '#666666';
        ctx.font = '18px Nunito';
        ctx.textAlign = 'center';
        ctx.fillText('Cliquez sur "Cr√©er les sommets" pour commencer', canvas.width / 2, canvas.height / 2);
    </script>
</body>
</html>